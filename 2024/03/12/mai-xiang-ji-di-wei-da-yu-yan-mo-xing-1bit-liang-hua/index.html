<!DOCTYPE HTML>
<html lang="zh-CN">
    
    

<head>
    <meta charset="utf-8">
    <meta name="keywords" content="è¿ˆå‘æä½ä½å¤§è¯­è¨€æ¨¡å‹â€”â€”1bité‡åŒ–, QT-7274">
    <meta name="description" content="ç›´æ¥è¶Šè¿‡2bitè¿™ä¸€é‡åŒ–çº§åˆ«ï¼Œå¯¹LLMå¤§è¯­è¨€æ¨¡å‹è¿›è¡Œ1bité‡åŒ–å°è¯•ï¼">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    

    <title>è¿ˆå‘æä½ä½å¤§è¯­è¨€æ¨¡å‹â€”â€”1bité‡åŒ– | QT-7274</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head>

    
<body>


    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    <div>
                    
                    <img src="/medias/images/loading.gif" data-original="/medias/logo.gif" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">QT-7274</span>
                </div>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>é¦–é¡µ</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>æ ‡ç­¾</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>åˆ†ç±»</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>å½’æ¡£</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>å…³äº</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>å‹æƒ…é“¾æ¥</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="æœç´¢" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">
    <div class="mobile-head bg-color">
      <div>
        
        <img no-lazy src="/medias/logo.gif" class="logo-img circle responsive-img">
        
        <div class="logo-name">QT-7274</div>
        <div class="logo-desc">
          
              Never really desperate, only the lost of the soul.
              
            </div>
      </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			é¦–é¡µ
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			æ ‡ç­¾
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			åˆ†ç±»
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			å½’æ¡£
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			å…³äº
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			å‹æƒ…é“¾æ¥
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/QT-7274/QT-7274.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #003a8c;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/QT-7274/QT-7274.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('è¯·è¾“å…¥è®¿é—®æœ¬æ–‡ç« çš„å¯†ç ')).toString(CryptoJS.enc.Hex)) {
                alert('å¯†ç é”™è¯¯ï¼Œå°†è¿”å›ä¸»é¡µï¼');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/0.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">è¿ˆå‘æä½ä½å¤§è¯­è¨€æ¨¡å‹â€”â€”1bité‡åŒ–</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">
                                <span class="chip bg-color">æ·±åº¦å­¦ä¹ </span>
                            </a>
                        
                            <a href="/tags/%E8%AE%BA%E6%96%87%E5%B7%A5%E4%BD%9C/">
                                <span class="chip bg-color">è®ºæ–‡å·¥ä½œ</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="post-category">
                                æ·±åº¦å­¦ä¹ 
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2024-03-12
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>æ›´æ–°æ—¥æœŸ:&nbsp;&nbsp;
                    2024-03-13
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>æ–‡ç« å­—æ•°:&nbsp;&nbsp;
                    4.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>é˜…è¯»æ—¶é•¿:&nbsp;&nbsp;
                    19 åˆ†
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>é˜…è¯»æ¬¡æ•°:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- æ˜¯å¦åŠ è½½ä½¿ç”¨è‡ªå¸¦çš„ prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="æ‘˜è¦">æ‘˜è¦</h2>
<p>å½“é‡åŒ–æŠ€æœ¯ä¸­çš„ä½å®½ï¼ˆç”¨äºè¡¨ç¤ºæ¯ç§æƒé‡çš„ä½æ•°ï¼‰æ€¥å‰§å‡å°‘æ—¶ï¼Œé€šå¸¸ä¼šå¯¼è‡´æ¨¡å‹æ€§èƒ½çš„å¤§å¹…ä¸‹é™ã€‚</p>
<p>ä¸ºäº†ç¼“è§£è¿™ç§é—®é¢˜ï¼Œä½œè€…æå‡ºäº†ä¸€ç§å¼€åˆ›æ€§çš„æ–¹æ³•â€”â€” <strong>OneBitï¼Œè¯¥æ–¹æ³•å°† LLM æƒé‡çŸ©é˜µé‡åŒ–ä¸º 1 ä½å€¼ã€‚è¿™ä»£è¡¨äº†ä¸€ç§æ¿€è¿›çš„é‡åŒ–å½¢å¼ï¼Œæ—¨åœ¨å°½å¯èƒ½é™ä½ä½å®½ã€‚</strong></p>
<p>OneBit åŒ…å«ï¼š</p>
<ul>
<li><strong>é‡åŒ–æ„ŸçŸ¥è®­ç»ƒ (QAT) æ¡†æ¶</strong>ï¼Œè¯¥æ¡†æ¶åŒ…æ‹¬ä¸€ç§ä»¥ 1 ä½å½¢å¼è¡¨ç¤ºå‚æ•°çš„ç‹¬ç‰¹æ–¹æ³•ï¼Œå¯å¢å¼º LLM çš„é‡åŒ–èƒ½åŠ›ã€‚</li>
<li>é‡‡ç”¨åŸºäº<strong>çŸ©é˜µåˆ†è§£</strong>çš„å‚æ•°åˆå§‹åŒ–ç­–ç•¥ï¼ŒåŠ é€Ÿäº† QAT è¿‡ç¨‹çš„æ”¶æ•›ã€‚</li>
</ul>
<blockquote>
<p><code>For this target, we introduce a 1-bit quantization-aware training (QAT) framework named OneBit, including a novel 1-bit parameter representation method to better quantize LLMs as well as an effective parameter initialization method based on matrix decomposition to improve the convergence speed of the QAT framework. </code></p>
</blockquote>
<h2 id="é—®é¢˜å’ŒæŒ‘æˆ˜">é—®é¢˜å’ŒæŒ‘æˆ˜</h2>
<ol>
<li>
<p>ä½†æ˜¯ï¼ŒåŸºäº Transformer çš„ LLM çš„éƒ¨ç½²å……æ»¡äº†å›°éš¾ï¼Œè¿™ä¸»è¦æ˜¯ç”±äºå®ƒä»¬çš„é«˜è®¡ç®—éœ€æ±‚å’Œå¤§é‡çš„å†…å­˜å ç”¨é‡ã€‚éšç€ LLM å‚æ•°æ•°é‡çš„å¢åŠ ï¼Œæ“ä½œå®ƒä»¬æ‰€éœ€çš„èµ„æºä¹Ÿä¼šç›¸åº”å¢åŠ ã€‚</p>
<blockquote>
<p>Despite their popularity, deploying transformer-based LLMs presents significant challenges due to their computational intensity and considerable memory requirements as the parameters of LLMs become more and more.</p>
</blockquote>
</li>
<li>
<p>è®¸å¤šäººï¼ˆDettmers ç­‰äººï¼Œ2022 å¹´ï¼›Frantar ç­‰äººï¼Œ2022 å¹´ï¼›Frantar å’Œ Alistarhï¼Œ2023 å¹´ï¼‰è‡´åŠ›äºå‡å°‘ LLM çš„è®¡ç®—å’Œå†…å­˜å¼€é”€ï¼ŒåŒæ—¶ä»ä¿ç•™å…¶å¤§éƒ¨åˆ†åŸå§‹æ¨¡å‹åŠŸèƒ½ã€‚åœ¨è¿™äº›åŠªåŠ›ä¸­ï¼Œé‡åŒ–æŠ€æœ¯å¾—åˆ°äº†å¹¿æ³›å…³æ³¨ï¼Œå°¤å…¶æ˜¯è®­ç»ƒåé‡åŒ–ï¼ˆPost-Training PTQï¼‰ï¼Œå› ä¸ºå®ƒçš„è¿ç§»(transfering)æˆæœ¬æ›´ä½ã€‚GPTQï¼ˆFrantar ç­‰äººï¼Œ2022 å¹´ï¼‰ã€SpQRï¼ˆDettmers ç­‰äººï¼Œ2023 å¹´bï¼‰å’Œ AWQï¼ˆLin ç­‰äººï¼Œ2023 å¹´ï¼‰ç­‰å¼€åˆ›æ€§ç ”ç©¶æˆåŠŸåœ°å°† LLM çš„æƒé‡çŸ©é˜µå‹ç¼©ä¸º 4 bitå€¼ï¼ŒåŒæ—¶ä¿æŒäº† LLM çš„ä¸»è¦èƒ½åŠ›ã€‚é«˜æ•ˆé‡åŒ–å®ç°äº†æ—¶é—´å’Œç©ºé—´æ•ˆç‡ä»¥åŠæ¨¡å‹æ€§èƒ½ä¹‹é—´çš„å¹³è¡¡ï¼Œæ˜¯ LLM ä¼˜åŒ–çš„é‡å¤§è¿›å±•ã€‚</p>
<blockquote>
<p><code>Among these efforts, quantization has gained widespread attention, particularly Post-Training Quantization (PTQ), benefitted from its lower transferring costs. Seminal studies such as GPTQ (Frantar et al., 2022), SpQR (Dettmers et al., 2023b), and AWQ (Lin et al., 2023) successfully compress the weight matrices of LLMs to 4-bit values while maintaining the main abilities of LLMs. Efficient quantization represents significant advances in LLM optimization, by achieving a balance between time and space efficiency as well as model performance.</code></p>
</blockquote>
</li>
<li>
<p>å°½ç®¡ PTQ å¯ä»¥æœ‰æ•ˆåœ°å°†æƒé‡çŸ©é˜µå‹ç¼©ä¸ºè‡³å°‘ 3 ä½è¡¨ç¤ºå½¢å¼ï¼Œä½†éšç€ä½å®½çš„è¿›ä¸€æ­¥é™ä½ï¼Œå…¶æœ‰æ•ˆæ€§ä¼šå¤§å¤§é™ä½ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<blockquote>
<p><code>Unfortunately, the efficacy of PTQ rapidly diminishes when the quantization bit-width is extremely low, as shown in Figure 1.</code></p>
</blockquote>
<p><img src="/medias/images/loading.gif" data-original="image-20240312202645704.png" alt="image-20240312202645704"></p>
</li>
<li>
<p>æœ€è¿‘çš„ç ”ç©¶å¸Œæœ›åˆ©ç”¨é‡åŒ–æ„ŸçŸ¥è®­ç»ƒï¼ˆQuantizationAware Trainingï¼ŒQATï¼‰æ¥å…‹æœ PTQ é¢ä¸´çš„ç“¶é¢ˆã€‚LLM-QAT ï¼ˆLiu ç­‰äººï¼Œ2023 å¹´ï¼‰åœ¨é‡åŒ–è¿‡ç¨‹ä¸­å¼•å…¥äº†ä¸€äº›å¯å­¦ä¹ çš„å‚æ•°ï¼Œå–å¾—äº†æ˜¾è‘—çš„æ•ˆæœã€‚OmniQuant ï¼ˆShao ç­‰äººï¼Œ2023 å¹´ï¼‰æ•´åˆäº†å¯å­¦ä¹ çš„ç­‰ä»·å˜æ¢ï¼Œåœ¨ 2 bité‡åŒ–æ–¹é¢å–å¾—äº†å¯å–œçš„æˆæœã€‚ç„¶è€Œï¼Œç°æœ‰çš„æ–¹æ³•åœ¨å°†æ¨¡å‹æƒé‡å‹ç¼©åˆ° 1 ä½æ—¶æ•ˆæœä¸‹é™ï¼Œéš¾ä»¥ä¿æŒæœ‰æ•ˆæ€§ã€‚</p>
<p>ä¸»è¦é—®é¢˜æ˜¯åœ¨å¦‚æ­¤ä½çš„ä½å®½ä¸‹ä¼šå‡ºç°ä¸¥é‡çš„ç²¾åº¦æŸå¤±ã€‚**è¿™ç§ç²¾åº¦çš„æŸå¤±æå¤§åœ°å½±å“äº†çº¿æ€§æŠ•å½±è¿ç®—ï¼ˆè¡¨ç¤ºä¸º WXï¼Œå…¶ä¸­ W æ˜¯æƒé‡çŸ©é˜µï¼ŒX æ˜¯è¾“å…¥ï¼‰ï¼Œè¿™æ˜¯ LLM çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚**ç²¾åº¦çš„æ€¥å‰§é™ä½å¯¼è‡´åœ¨æ­¤æ“ä½œæœŸé—´ä¸¢å¤±çš„ä¿¡æ¯å¢åŠ ï¼Œä»è€Œå½±å“æ¨¡å‹çš„æ•´ä½“æ€§èƒ½ã€‚</p>
<blockquote>
<p><code>Recent researches hope to leverage Quantization Aware Training (QAT) to overcome the bottlenecks faced by PTQ. LLM-QAT (Liu et al., 2023) introduces a few learnable parameters into the quantization process, achieving notable results. OmniQuant (Shao et al., 2023), integrating learnable equivalent transformation, presents promising results in 2-bit quantization. However, existing methods decline when compressing model weights to 1 bit, struggling to maintain effectiveness.</code></p>
</blockquote>
</li>
</ol>
<h2 id="æ–¹æ³•ä»‹ç»">æ–¹æ³•ä»‹ç»</h2>
<ol>
<li>ä½œè€…æå‡ºäº†ä¸€ç§æ–°é¢–çš„<strong>çº¿æ€§å±‚ä¸ç¬¦å·å€¼æ— å…³åˆ†è§£æ³•</strong>ï¼ˆSign-Value-Independent Decomoisition, SVIDï¼‰ï¼Œä»¥ä½¿ç”¨çº¦ 1 bitå€¼æ¥è¡¨ç¤º LLMã€‚
<ul>
<li>æ¯ä¸ªåŸå§‹é«˜ä½(high-bit)æƒé‡çŸ©é˜µè¢«åˆ†è§£ä¸º<strong>ä¸€ä¸ªç¬¦å·çŸ©é˜µ</strong>ï¼ˆÂ±1ï¼‰å’Œ<strong>ä¸¤ä¸ªå€¼å‘é‡</strong>(value vectors)ã€‚
<ul>
<li>å€¼å‘é‡ä»¥è¾ƒä½çš„æˆæœ¬æä¾›äº†çº¿æ€§æŠ•å½±æ‰€éœ€çš„æµ®ç‚¹ç²¾åº¦ï¼Œå¹¶<strong>æœ‰åŠ©äºè½»æ¾è®­ç»ƒæ¨¡å‹</strong>ã€‚</li>
<li>ç¬¦å·çŸ©é˜µä»¥è¾ƒå°çš„ç©ºé—´æˆæœ¬ä¿æŒäº†åŸå§‹æƒé‡çŸ©é˜µçš„é«˜ç§©ï¼Œä»è€Œ<strong>ä¿ç•™äº†è¾ƒé«˜çš„ä¿¡æ¯å®¹é‡</strong>ã€‚</li>
</ul>
</li>
<li>SVID ä¸º 1 bitæ¨¡å‹æä¾›äº†æ›´å¥½çš„å‚æ•°åˆå§‹åŒ–ï¼Œä½œè€…é‡‡ç”¨<strong>é‡åŒ–æ„ŸçŸ¥çŸ¥è¯†è’¸é¦æ³•</strong>(quantization-aware knowledge distillation)ï¼Œå°†åŸå§‹æ¨¡å‹çš„èƒ½åŠ›è¿ç§»åˆ°æ‰€æå‡ºçš„ 1 bitå¯¹åº”æ¨¡å‹ä¸­ã€‚</li>
</ul>
</li>
<li>ä½œè€…æå‡ºç”¨ SVID <strong>å°†é«˜ä½çŸ©é˜µåˆ†è§£ä¸ºä½ä½çŸ©é˜µ</strong>ï¼Œè¿™å¯¹ä½œè€…çš„ 1 ä½æ¶æ„çš„åˆå§‹åŒ–è‡³å…³é‡è¦ã€‚å®éªŒè¯æ˜ï¼ŒåŸºäº SVID çš„åˆå§‹åŒ–å¯ä»¥æé«˜æ¨¡å‹æ€§èƒ½å’Œæ”¶æ•›é€Ÿåº¦ã€‚</li>
<li>å¹¿æ³›çš„å®éªŒè¯æ˜ï¼Œä½œè€…çš„æ–¹æ³•åœ¨ OPTã€LLaMA å’Œ LLaMA2 ä¸­çš„æ¨¡å‹è§„æ¨¡ä» 1.3B åˆ° 13B ä¸ç­‰æ—¶éƒ½èƒ½å¾ˆå¥½åœ°å‘æŒ¥ä½œç”¨ï¼Œè¿™ä¹Ÿå±•ç¤ºäº†å®ƒçš„é€šç”¨æ€§ã€‚</li>
</ol>
<h2 id="æ–¹æ³•å®ç°">æ–¹æ³•å®ç°</h2>
<h3 id="èƒŒæ™¯">èƒŒæ™¯</h3>
<p>æ¨¡å‹é‡åŒ–çš„ä¸»è¦æ€è·¯æ˜¯å°† FP32 æˆ– FP16 æ ¼å¼æ¨¡å‹ä¸­çš„æ¯ä¸ªæƒé‡çŸ©é˜µ \boldsymbol{W}  å‹ç¼©æˆä½æ¯”ç‰¹å¯¹åº”æ ¼å¼ã€‚å…·ä½“æ¥è¯´ï¼Œä½œè€…é€šå¸¸å°†transformerä¸­çº¿æ€§å±‚çš„æƒé‡çŸ©é˜µé‡åŒ–ä¸º 8 ä½ã€4 ä½ç”šè‡³ 2 ä½ã€‚</p>
<p>å¤§å¤šæ•°é‡åŒ–ç ”ç©¶ä¸»è¦é‡‡ç”¨å››èˆäº”å…¥æ³•ï¼ˆRound-To-Nearest, RTNï¼‰ï¼Œå³å°†æƒé‡  w å››èˆäº”å…¥åˆ°é‡åŒ–ç½‘æ ¼ä¸­æœ€æ¥è¿‘çš„å€¼ã€‚å®ƒå¯ä»¥è¡¨è¿°ä¸ºï¼š<br>
$$<br>
\hat{w} = \text{Clip}(\lfloor \frac{w}{s} \rceil + z,\ 0,\ 2^N -1) \tag{1}<br>
$$<br>
å…¶ä¸­ï¼š</p>
<ul>
<li>s  è¡¨ç¤ºé‡åŒ–ç¼©æ”¾å‚æ•°ï¼Œ</li>
<li>z  è¡¨ç¤ºé›¶ç‚¹å‚æ•°ï¼Œ</li>
<li>N  è¡¨ç¤ºé‡åŒ–ä½å®½ã€‚</li>
<li>$\text{Clip}(\cdot)$å°†ç»“æœæˆªæ–­åœ¨ 0 åˆ° 2^N - 1 çš„èŒƒå›´å†…ã€‚</li>
</ul>
<p>éšç€ä½å®½è¶Šæ¥è¶Šå°ï¼Œé‡åŒ–ç½‘æ ¼ä¹Ÿè¶Šæ¥è¶Šç¨€ç–ã€‚å½“ä½œè€…å°† LLM é‡åŒ–ä¸º 1bit å€¼æ—¶ï¼Œé‡åŒ–æ¨¡å‹ä¸­åªæœ‰ 2 ä¸ªå¯ç”¨çš„æ•°å­—å¯ä¾›é€‰æ‹©ã€‚</p>
<p>ç°æœ‰ç ”ç©¶ï¼ˆDettmers å’Œ Zettlemoyerï¼Œ2023 å¹´ï¼‰æŒ‡å‡ºï¼Œ<strong>åŸºäº RTN æ–¹æ³•çš„é‡åŒ–å¯ä»¥åœ¨ 4 ä½æ°´å¹³ä¸Šè·å¾—æœ€ä½³æ€§èƒ½</strong>ã€‚å¦‚ä¹‹å‰çš„å›¾ç¤ºæ‰€ç¤ºï¼Œè¿›ä¸€æ­¥å‹ç¼©ï¼ˆå¦‚å°†æ¨¡å‹é‡åŒ–ä¸º 2 ä½å€¼ï¼‰ä¼šå¯¼è‡´æ€§èƒ½å¤§å¹…ä¸‹é™ï¼ˆShao ç­‰äººï¼Œ2023 å¹´ï¼‰ã€‚</p>
<p>æ­¤å¤–ï¼Œ<strong>å½“  N ç­‰äº 1 æ—¶ï¼ŒåŸºäº RTN æ–¹æ³•çš„é‡åŒ–æœ¬è´¨ä¸Šç­‰åŒäºè®¾ç½®ä¸€ä¸ªé˜ˆå€¼</strong>ï¼Œé˜ˆå€¼ä¸¤ä¾§çš„æƒé‡ w  è¢«è½¬æ¢ä¸ºç›¸åº”çš„æ•´æ•°å€¼ $\hat{w}$ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…¬å¼ (1) ä¸­çš„å‚æ•° s  å’Œ  z å®é™…ä¸Šå°±å¤±å»äº†å®é™…æ„ä¹‰ã€‚å› æ­¤ï¼Œå½“å°†æƒé‡é‡åŒ–ä¸º 1 bitæ—¶ï¼Œå…ƒç´ å‘ RTN è¿ç®—ä¼šå¤§å¤§é™ä½æƒé‡çŸ©é˜µ W çš„ç²¾åº¦ï¼Œä»è€Œå¯¼è‡´é‡åŒ–æ¨¡å‹çš„æ€§èƒ½ä¸ä½³ã€‚</p>
<blockquote>
<p>å½“ N ç­‰äº 1 æ—¶ï¼ŒåŸºäºèˆå…¥åˆ°æœ€è¿‘ (RTN) æ–¹æ³•çš„é‡åŒ–è¿‡ç¨‹ç®€åŒ–ä¸ºæ¯ä¸ªæƒé‡çš„äºŒè¿›åˆ¶å†³ç­–ï¼Œå°†å…¶åˆ†é…ç»™ 0 æˆ– 1ï¼Œåœ¨è€ƒè™‘ç¬¦å·åç›¸å½“äº -1 æˆ– +1ã€‚è¿™æ˜¯å› ä¸º 1 ä½é‡åŒ–å€¼<strong>åªæœ‰ä¸¤ç§å¯èƒ½çš„çŠ¶æ€</strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–¹ç¨‹ (1) ä¸­çš„æ¯”ä¾‹å‚æ•°å’Œé›¶ç‚¹å‚æ•° (z) å˜å¾—å¤šä½™ï¼Œå› ä¸ºé‡åŒ–ç½‘æ ¼æ˜¯æœ€ç¨€ç–çš„ï¼Œä¸ä¼šåœ¨ä¸¤ç§çŠ¶æ€ä¹‹é—´æä¾›æ¸å˜ã€‚<strong>å‚æ•° s å’Œ z æ—¨åœ¨è°ƒæ•´é‡åŒ–èŒƒå›´å’Œä¸­å¿ƒï¼Œä½†ç”±äºåªæœ‰ä¸¤ç§å¯èƒ½çš„ç»“æœï¼Œå®ƒä»¬åœ¨å¾®è°ƒé‡åŒ–è¿‡ç¨‹ä¸­çš„ä½œç”¨è¢«å¦å®šäº†ï¼Œå› æ­¤å®ƒä»¬å®é™…ä¸Šæ¯«æ— æ„ä¹‰ï¼</strong></p>
</blockquote>
<h3 id="1-bit-çº¿æ€§æ¶æ„">1 bit çº¿æ€§æ¶æ„</h3>
<p>ç”±äº 1 bitæƒé‡é‡åŒ–çš„ç²¾åº¦æŸå¤±ä¸¥é‡ï¼Œå°†çº¿æ€§å±‚ä¸­çš„æƒé‡çŸ©é˜µç›´æ¥ä» FP32/16 è½¬æ¢ä¸ºåŸºäº RTN çš„ 1 bitæ ¼å¼å…·æœ‰æŒ‘æˆ˜æ€§ã€‚Wang ç­‰äººï¼ˆ2023 å¹´ï¼‰é€šè¿‡ç ”ç©¶çº¯ 1 bitæƒé‡çŸ©é˜µçš„èƒ½åŠ›ï¼Œä»å¤´å¼€å§‹è®­ç»ƒ 1 bitæ¨¡å‹ï¼Œæ¢ç´¢äº†è¿™ç§å¯èƒ½æ€§ã€‚åœ¨ W1A16 è®¾ç½®ä¸­ï¼Œä»–ä»¬çš„çº¿æ€§å±‚è®¾è®¡ä¸ºï¼š<br>
$$<br>
\begin{align} W_{\pm} = \text{Sign}[\boldsymbol{W} - \text{Mean}(\boldsymbol{W})]\newline<br>
\ \eta = \text{Mean}[\text{Abs}(\boldsymbol{W} - \text{Mean}(\boldsymbol{W}))]\newline<br>
\ \boldsymbol{Y} = \eta \cdot \text{LayerNorm}(\boldsymbol{X}) \boldsymbol{W}_{\pm}^T \end{align} \tag{2}<br>
$$<br>
å…¶ä¸­ï¼š</p>
<ul>
<li>$\boldsymbol{W}$  è¡¨ç¤º mÃ—n å½¢çš„é‡åŒ–æƒé‡çŸ©é˜µ</li>
<li>$W_{\pm 1}$ è¡¨ç¤º 1 bité‡åŒ–çŸ©é˜µ</li>
<li>$\boldsymbol{X}$ æ˜¯çº¿æ€§å±‚çš„è¾“å…¥</li>
<li>$\boldsymbol{Y}$ æ˜¯è¾“å‡º</li>
<li>$\text{Sign}(\cdot) $ã€ $\text{Mean}(\cdot)$ å’Œ $\text{Abs}(\cdot)$ å‡½æ•°è¿”å›ç¬¦å·çŸ©é˜µã€å¹³å‡å€¼å’Œç»å¯¹å€¼çŸ©é˜µã€‚</li>
</ul>
<p>é—æ†¾çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•é™ä½äº†è®¡ç®—éœ€æ±‚ï¼Œ<strong>ä½†ä¹Ÿå¯¼è‡´æ€§èƒ½æ˜æ˜¾ä¸‹é™</strong>ï¼ˆWang ç­‰äººï¼Œ2023 å¹´ï¼‰ã€‚</p>
<p>å— Wang ç­‰äººï¼ˆ2023ï¼‰çš„å¯å‘ï¼Œä½œè€…è¿˜ä½¿ç”¨å‡½æ•° $\text{Sign}(\cdot)$ å¯¹æƒé‡çŸ©é˜µè¿›è¡Œé‡åŒ–ï¼Œé‡åŒ–åçš„çŸ©é˜µå…ƒç´ è¢«è®¾ç½®ä¸º +1 æˆ– -1ã€‚</p>
<p>æ­¤å¤–ï¼Œä½œè€…è¿˜æ³¨æ„åˆ°ï¼Œè™½ç„¶ $\boldsymbol{W}_{\pm 1}$ ä¿æŒäº† $\boldsymbol{W}$ çš„é«˜ç§©ï¼Œä½†é—æ¼çš„æµ®ç‚¹ç²¾åº¦ä»ç„¶ä¼šç ´åæ¨¡å‹æ€§èƒ½ã€‚</p>
<p>å› æ­¤ï¼Œä¸ä¹‹å‰çš„ç ”ç©¶ä¸åŒï¼Œä½œè€…<strong>å¼•å…¥äº†ä¸¤ä¸ª FP16 æ ¼å¼çš„å€¼å‘é‡</strong>ï¼Œä»¥å‡å°‘é‡åŒ–è¿‡ç¨‹ä¸­çš„ç²¾åº¦æŸå¤±ã€‚ä½œè€…æå‡ºçš„çº¿æ€§å±‚è®¾è®¡å¦‚ä¸‹ï¼š<br>
$$<br>
\begin{align} W_{\pm 1} = \text{Sign}(\boldsymbol{W})\newline<br>
\ \boldsymbol{Y} = [(\boldsymbol{X}\odot \boldsymbol{g}) \boldsymbol{W}_{\pm 1}^T]\odot \boldsymbol{h}\newline<br>
\ \boldsymbol{Z} = \text{LayerNorm}(\boldsymbol{Y}) \end{align} \tag{3}<br>
$$<br>
å…¶ä¸­ï¼š</p>
<ul>
<li>g å’Œ h æ˜¯ä¸¤ä¸ª FP16 å€¼å‘é‡ã€‚</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼Œä½œè€…åœ¨å…¬å¼ (3) ä¸­ä½¿ç”¨æ‹¬å·æŒ‡å®šäº†è®¡ç®—é¡ºåºï¼Œä»¥å°½é‡å‡å°‘æ—¶é—´å’Œç©ºé—´æˆæœ¬ã€‚</p>
</blockquote>
<p>Wang ç­‰äººï¼ˆ2023 å¹´ï¼‰ä¸ OneBit çš„ä¸»è¦åŒºåˆ«åœ¨äºé¢å¤–çš„å‚æ•° g å’Œ h ã€‚ä¾‹å¦‚ï¼Œå½“ä½œè€…é‡åŒ–ä¸€ä¸ªå½¢çŠ¶ä¸º 4096Ã—4096 çš„æƒé‡çŸ©é˜µæ—¶ï¼Œé‡åŒ–ç»“æœçš„å¹³å‡ä½å®½ä¸º 1.0073ã€‚</p>
<p><img src="/medias/images/loading.gif" data-original="image-20240312205927836.png" alt="image-20240312205927836"></p>
<p>åœ¨ä½œè€…æå‡ºçš„ 1 bitæ¶æ„ä¸­ï¼Œæƒé‡çŸ©é˜µ $\boldsymbol{W}$ åœ¨æ•°å­¦ä¸Šåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ˜¯ INT1 æ ¼å¼çš„ç¬¦å·çŸ©é˜µ $W_{\pm 1}$ ï¼Œ</li>
<li>ä¸€ä¸ªæ˜¯ FP16 æ ¼å¼çš„å€¼å‘é‡ $\boldsymbol{g/h}$ ã€‚</li>
</ul>
<p>ä¸ºäº†å€ŸåŠ©å®Œå…¨è®­ç»ƒè¿‡çš„æƒé‡åˆå§‹åŒ– 1 ä½æ¨¡å‹ï¼Œä½œè€…å¼•å…¥äº†æƒé‡çŸ©é˜µ W çš„ç¬¦å·-å€¼æ— å…³åˆ†è§£ï¼ˆSVIDï¼‰ï¼Œå¯è¡¨è¿°ä¸ºï¼š</p>
<p>$$<br>
\boldsymbol{W}=\boldsymbol{W}<em>{sign} \odot \boldsymbol{W}</em>{value}<br>
$$</p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>$\boldsymbol{W}_{value} = |\boldsymbol{W}|$</li>
<li>$\boldsymbol{W}_{sign} = \text{Sign}(\boldsymbol{W})$</li>
</ul>
<p>å¯¹äº  $\boldsymbol{W}_{value}$ ï¼Œä½œè€…è¿›ä¸€æ­¥å°†å…¶è¿‘ä¼¼åˆ†è§£ä¸ºä¸¤ä¸ªå‘é‡  a å’Œ b  çš„å¤–ç§¯ï¼Œè¿™ä¹Ÿè¢«ç§°ä¸º rank-1 è¿‘ä¼¼ã€‚</p>
<p>å› æ­¤ï¼Œä½œè€…æå‡ºçš„çŸ©é˜µåˆ†è§£æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>
$$<br>
\boldsymbol{W} \approx \boldsymbol{W}_{sign} \cdot (\boldsymbol{ab}^T) \tag{4}<br>
$$</p>
<p>ä½œè€…å¯ä»¥é‡‡ç”¨ä¸€äº›å¹¿æ³›ä½¿ç”¨çš„çŸ©é˜µåˆ†è§£æ–¹æ³•æ¥è¿›è¡Œ rank-1 è¿‘ä¼¼ï¼Œå¦‚ SVDï¼ˆBeltramiï¼Œ1990 å¹´ï¼‰å’Œ NMFï¼ˆPaatero å’Œ Tapperï¼Œ1994 å¹´ï¼‰ã€‚</p>
<h3 id="å‘½é¢˜-1">å‘½é¢˜ 1</h3>
<p>ç»™å®šæƒé‡çŸ©é˜µ $\boldsymbol{W}$ å’Œè¾“å…¥ $\boldsymbol{X}$ åï¼Œçº¿æ€§å±‚å¯æ ¹æ® SVID é‡æ„å¦‚ä¸‹ï¼š<br>
$$<br>
\boldsymbol{XW}^T \approx [(\boldsymbol{X} \odot \boldsymbol{b}^T)\boldsymbol{W}_{sign}^{T}]\odot \boldsymbol{a}^T \tag{5}<br>
$$<br>
<strong>è¿™å¼¥è¡¥äº†é‡åŒ–æ¨¡å‹çš„ç»“æ„ä¸åŸå§‹æƒé‡ä¹‹é—´çš„å·®è·ã€‚</strong></p>
<p>å®ƒè¡¨æ˜ï¼Œå¦‚æœä½œè€…å°† $\boldsymbol{W}<em>{sign}$  èµ‹å€¼ä¸º $\boldsymbol{W}</em>{\pm 1}$ ï¼Œå°†  $\boldsymbol{a}^T$ èµ‹å€¼ä¸º  h ï¼Œå°†  $\boldsymbol{b}^T$ èµ‹å€¼ä¸º g ï¼Œé‚£ä¹ˆé‡åŒ–æ¨¡å‹å°±æ˜¯åŸå§‹æ¨¡å‹çš„è¿‘ä¼¼åˆå§‹åŒ–ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸å…ˆè¿˜åŸåŸå§‹çŸ©é˜µ  $\boldsymbol{W}$ ç›¸æ¯”ï¼ˆå¦‚å…¬å¼ (4)ï¼‰ï¼Œå…¬å¼ (5) ä¸­çš„è®¡ç®—é¡ºåºç”±äºæ— éœ€è¿˜åŸ FP16Wï¼Œå› æ­¤å¯ä»¥åœ¨å†…å­˜ä¸­èŠ‚çœå¤§çº¦ä¸€ä¸ª FP16 æ ¼å¼çš„çŸ©é˜µ$ \boldsymbol{W}$ã€‚</p>
<p>**SVID çš„ä¸»è¦ç›®çš„æ˜¯è®©ç¬¦å·çŸ©é˜µå‚ä¸çŸ©é˜µçš„è¿‘ä¼¼ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¾èµ– FP16 æ ¼å¼çš„å€¼å‘é‡ã€‚**ä¸ºäº†è¯æ˜ç¬¦å·çŸ©é˜µåœ¨çŸ©é˜µé€¼è¿‘ä¸­çš„ä½œç”¨ï¼Œä½œè€…æå‡ºäº†ä»¥ä¸‹å‘½é¢˜ã€‚</p>
<h3 id="å‘½é¢˜2">å‘½é¢˜2</h3>
<p>ç»™å®šçŸ©é˜µ$ \boldsymbol{W}$  å’Œ $|\boldsymbol{W}| $ï¼Œ $\boldsymbol{W}=\boldsymbol{W}_{sign}\cdot |\boldsymbol{W}| $ã€‚</p>
<p>ä½œè€…æŒ‰ä»¥ä¸‹æ–¹å¼åˆ†è§£è¿™äº›çŸ©é˜µï¼š<br>
$$<br>
\boldsymbol{W}= \boldsymbol{ab}^T+\boldsymbol{E}_1  å’Œ  |\boldsymbol{W}| = \boldsymbol{\widetilde{a}\widetilde{b}}^T+\boldsymbol{E}_2<br>
$$<br>
å…¶ä¸­ï¼š</p>
<ul>
<li>$ \boldsymbol{E}_i $è¡¨ç¤ºè¯¯å·®çŸ©é˜µã€‚</li>
</ul>
<p>ä» Frobenius-norm çš„è§’åº¦æ¥çœ‹ï¼ŒSVID æ›´æ¥è¿‘åŸå§‹çŸ©é˜µ $\boldsymbol{W}$ ï¼š<br>
$$<br>
\lVert \boldsymbol{W} - \boldsymbol{W}<em>{sign} \odot \boldsymbol{\widetilde{a}\widetilde{b}}^T \rVert</em>{F}^2 \le \lVert \boldsymbol{W} - \boldsymbol{ab}^T \rVert_F^2 \tag{6}<br>
$$<br>
å®ƒæ¸…æ¥šåœ°è¡¨æ˜äº†ç¬¦å·çŸ©é˜µ$ \boldsymbol{W}_{sign} $åœ¨çŸ©é˜µé€¼è¿‘ä¸­çš„å®é™…ä½œç”¨ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>ç”±äºå¤§å¤šæ•°å‚æ•°çš„ç²¾åº¦éƒ½å¾ˆä½ï¼Œå› æ­¤è¦ç²¾ç¡®åœ°è¿‘ä¼¼æƒé‡çŸ©é˜µ $\boldsymbol{W}$ æ˜¯ç›¸å½“å…·æœ‰æŒ‘æˆ˜æ€§çš„</strong>ã€‚SVID çš„ç›®çš„ä¸æ˜¯ç²¾ç¡®å¤åˆ¶åŸå§‹æ¨¡å‹çš„å‚æ•°ï¼Œè€Œæ˜¯åˆ©ç”¨åŸå§‹æ¨¡å‹çš„å¤§é‡è®­ç»ƒï¼Œä¸ºè¿›ä¸€æ­¥è®­ç»ƒæä¾›ä¸€ä¸ªæœ‰æ•ˆçš„èµ·ç‚¹ã€‚</p>
<h3 id="çŸ¥è¯†è’¸é¦">çŸ¥è¯†è’¸é¦</h3>
<p>ä½œè€…é‡‡ç”¨é‡åŒ–æ„ŸçŸ¥çŸ¥è¯†è’¸é¦(quantization-aware knowledge distillation)æŠ€æœ¯ï¼Œå°†çŸ¥è¯†ä»åŸå§‹æ¨¡å‹ï¼ˆå³æ•™å¸ˆæ¨¡å‹ï¼‰è¿ç§»åˆ°é‡åŒ–æ¨¡å‹ï¼ˆå³å­¦ç”Ÿæ¨¡å‹ï¼‰ã€‚</p>
<p>åœ¨å­¦ç”Ÿæ¨¡å‹ä¸­ï¼ŒçŸ©é˜µ $\boldsymbol{W}$ ä¸­çš„å…ƒç´ å’Œå…¬å¼ (3) ä¸­çš„å‘é‡ $\boldsymbol{g/h}$ å°†è¢«è®­ç»ƒã€‚</p>
<p>ä½œè€…ä½¿ç”¨åŸºäºäº¤å‰ç†µçš„å¯¹æ•°å’ŒåŸºäºéšè—çŠ¶æ€çš„å‡æ–¹è¯¯å·®å…¨ç²¾åº¦æ•™å¸ˆæ¨¡å‹æ¥æŒ‡å¯¼é‡åŒ–çš„å­¦ç”Ÿæ¨¡å‹ï¼ˆSun et al.ï¼‰ ä¸ä½¿ç”¨è¯­è¨€å»ºæ¨¡æŸå¤±ã€‚äº¤å‰ç†µå®šä¹‰ä¸ºï¼š<br>
$$<br>
\mathcal{L}<em>{CE}=-\frac{1}{n_s}\sum</em>{i=1}^{n_s}{\sum_c{P_{c}^{\mathcal{T}}\left( \boldsymbol{o}<em>i \right) \log P</em>{c}^{\mathcal{S}}\left( \boldsymbol{o}_i \right)}} \tag{7}<br>
$$<br>
å…¶ä¸­ï¼š</p>
<ul>
<li>c è¡¨ç¤ºç±»åˆ«æ•°</li>
<li>n_s è¡¨ç¤ºå½“å‰æ‰¹æ¬¡çš„è®­ç»ƒæ ·æœ¬æ•°</li>
<li>$\mathcal{T}$ å’Œ $\mathcal{S}$ åˆ†åˆ«æ˜¯æ•™å¸ˆæ¨¡å‹å’Œå­¦ç”Ÿæ¨¡å‹</li>
</ul>
<p>éšè—çŠ¶æ€çš„è¯¯å·®å®šä¹‰ä¸ºï¼š<br>
$$<br>
\mathcal{L}<em>{MSE}=\sum</em>{i=1}^{n_s}{\sum_{j=1}^{n_l}{\lVert \frac{\boldsymbol{q}<em>{i,j}^{\mathcal{T}}}{\lVert \boldsymbol{q}</em>{i,j}^{\mathcal{T}} \rVert <em>2}-\frac{\boldsymbol{q}</em>{i,j}^{\mathcal{S}}}{\lVert \boldsymbol{q}<em>{i,j}^{\mathcal{S}} \rVert} \rVert}</em>{2}^{2}} \tag{8}<br>
$$<br>
å…¶ä¸­ï¼š</p>
<ul>
<li>n_l è¡¨ç¤ºå±‚æ•°</li>
<li>$\boldsymbol{q}$ è¡¨ç¤ºéšè—çŠ¶æ€ã€‚</li>
</ul>
<p>å› æ­¤æœ€ç»ˆçš„ç›®æ ‡å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>
$$<br>
\mathcal{L}<em>{KD} = \mathcal{L}</em>{CE} + \alpha \mathcal{L}_{MSE} \tag{9}<br>
$$<br>
å…¶ä¸­ï¼š</p>
<ul>
<li>$ \alpha $æ˜¯å¹³è¡¡äº¤å‰ç†µæŸå¤±å’Œä¸­é—´å±‚ç‰¹å¾é‡è¦æ€§çš„è¶…å‚æ•°ã€‚</li>
</ul>
<h2 id="ä¸»è¦ç»“æœ">ä¸»è¦ç»“æœ</h2>
<p><img src="/medias/images/loading.gif" data-original="640.png" alt="å›¾ç‰‡"></p>
<ul>
<li>
<p>åœ¨å„ç§æ¨¡å‹å¤§å°ä¸‹ï¼Œä½œè€…çš„ 1 bitæƒé‡é‡åŒ–æ–¹æ³•åœ¨ W2A16 è®¾ç½®ä¸‹æ˜æ˜¾ä¼˜äºå…¶ä»–æ–¹æ³•ã€‚</p>
<p>æ­¤å¤–ï¼Œéšç€æ¨¡å‹è§„æ¨¡çš„å¢å¤§ï¼ŒåŸºäº QAT çš„æ–¹æ³•çš„æœ‰æ•ˆæ€§æŒç»­æé«˜ï¼Œè€Œ PTQ æ–¹æ³•ã€ GPTQ çš„ç»“æœå¯èƒ½ä¼šéšç€æ¨¡å‹è§„æ¨¡çš„å¢å¤§è€Œä¸‹é™ï¼ˆä¾‹å¦‚ï¼Œåœ¨ LLaMA ä¸Šä» 7B åˆ° 13Bï¼‰ã€‚è¿™è¡¨æ˜ï¼Œ<strong>åŸºäº QAT çš„æ–¹æ³•å¯ä»¥åœ¨æä½ä½é‡åŒ–æ—¶è·å¾—ç¨³å®šçš„ç»“æœ</strong>ã€‚</p>
</li>
<li>
<p><strong>å…·ä½“æ¥è¯´ï¼Œéšç€æ¨¡å‹å¤§å°çš„å¢åŠ ï¼Œä½œè€…çš„æ–¹æ³•æ›´æ¥è¿‘ FP16 çš„æ€§èƒ½</strong>ã€‚</p>
<blockquote>
<p>ä¾‹å¦‚ï¼Œå½“ä» LLaMA-7B æ‰©å±•åˆ° LLaMA-13B æ—¶ï¼ŒFP16 æ¨¡å‹çš„å›°æƒ‘åº¦ä»…é™ä½äº† 0.59ï¼Œè€Œä½œè€…çš„æ–¹æ³•åˆ™é™ä½äº† 1.20ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>åœ¨å›°æƒ‘åº¦æ–¹é¢ï¼Œåªæœ‰ä½œè€…çš„æ–¹æ³•å–å¾—äº†ä¸æœ€å¼º FP16 åŸºå‡†çº¿ç›¸å½“çš„ç»“æœã€‚</strong></p>
<blockquote>
<p>ä¾‹å¦‚ï¼Œä½œè€…çš„æ–¹æ³•åœ¨ LLaMA-13B æ¨¡å‹çš„ Wiki2 æ•°æ®é›†ä¸Šå–å¾—äº† 9.18 çš„æˆç»©ï¼Œè€Œ FP16 åŸºçº¿ä¸º 5.09ã€‚å…¶ä»–æ–¹æ³•çš„æ€§èƒ½æŸå¤±å¾ˆå¤§ï¼Œå°½ç®¡å®ƒä»¬ä½¿ç”¨çš„æ˜¯ 2 bité‡åŒ–ï¼Œæ¯”ä½œè€…çš„ 1 bité‡åŒ–è¦å¤šã€‚å¯¹äº GPTQ å’Œ LLM-QATï¼Œé‡åŒ–åçš„æ€§èƒ½ä¸‹é™ç›¸å½“ä¸¥é‡ã€‚è‡³äº OmniQuantï¼Œå°½ç®¡åœ¨ W2A16 è®¾ç½®ä¸‹å®ƒæ˜¯æœ€å¼ºçš„åŸºçº¿ï¼Œä½†ä¸ä½œè€…çš„ W1A16 è®¾ç½®ç›¸æ¯”ï¼Œå®ƒä»ç„¶é­å—äº†æ›´å¤§çš„æ€§èƒ½æŸå¤±ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>åœ¨é›¶æ ·æœ¬ç²¾åº¦æ–¹é¢ï¼Œè™½ç„¶æ‰€æœ‰æ–¹æ³•éƒ½ä¸å¯é¿å…åœ°ä¼šå‡ºç°ä¸€äº›æ€§èƒ½ä¸‹é™ï¼Œä½†åœ¨å¤§å¤šæ•°æ¨¡å‹ä¸­ï¼Œä½œè€…çš„æ–¹æ³•å–å¾—äº†æœ€æ¥è¿‘ FP16 åŸºå‡†çº¿çš„æ€§èƒ½ã€‚</strong></p>
<blockquote>
<p>åœ¨ OPT-1.3B/2.7B æ¨¡å‹ä¸Šï¼Œä½œè€…çš„æ–¹æ³•åœ¨ PIQA å’Œ ARC-e ç­‰å¤§å¤šæ•°ä»»åŠ¡ä¸Šçš„æ€§èƒ½æŸå¤±è¾ƒå°ã€‚æ­¤å¤–ï¼Œä¸æ’åç¬¬äºŒçš„åŸºçº¿ OmniQuant ç›¸æ¯”ï¼Œå…¶ä»–ä»»åŠ¡çš„æ€§èƒ½æŸå¤±å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚åœ¨ LLaMA-7B æ¨¡å‹ä¸Šï¼Œé™¤ ARC-e/ARCc å¤–ï¼Œä½œè€…çš„æ–¹æ³•åœ¨æ‰€æœ‰ä»»åŠ¡ä¸Šçš„è¡¨ç°éƒ½æ˜æ˜¾ä¼˜äº OmniQuantï¼Œå¹³å‡æ•´ä½“æé«˜çº¦ 4%ã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="åœ¨å®é™…é—®é¢˜ä¸­çš„è¡¨ç°">åœ¨å®é™…é—®é¢˜ä¸­çš„è¡¨ç°</h2>
<p>é‡ç‚¹ä¸“æ³¨ï¼š<strong>å¸¸è¯†æ¨ç†</strong>(commonsense reasoning)å’Œ<strong>ä¸–ç•ŒçŸ¥è¯†</strong>(world knowledge)ã€‚</p>
<ul>
<li>å¸¸è¯†æ¨ç†ï¼šè™½ç„¶å…¶ä»–æ¨¡å‹æ¯”ä½œè€…çš„æ¨¡å‹å‚æ•°æ›´å¤šï¼Œè®­ç»ƒæ›´å…¨é¢ï¼Œä½†ä½œè€…çš„æ¨¡å‹åœ¨å¸¸è¯†æ¨ç†æ–¹é¢ä»æœ‰ä¼˜åŠ¿ã€‚è¿™åæ˜ äº†ä»æ›´å¤§çš„ 7B æ¨¡å‹ä¸­ç»§æ‰¿çš„ä¼˜åŠ¿ã€‚</li>
<li>ä¸–ç•ŒçŸ¥è¯†ï¼šåœ¨ä¸–ç•ŒçŸ¥è¯†æ–¹é¢ï¼Œå°½ç®¡ä½œè€…çš„æ¨¡å‹<strong>åœ¨ç¤¾ä¼šç§‘å­¦é¢†åŸŸæŸå¤±è¾ƒå¤§</strong>ï¼Œä½†åœ¨å…¶ä»–é¢†åŸŸå´ä¼˜äºç»è¿‡å…¨é¢è®­ç»ƒçš„ Pythia-1Bã€‚è¿™äº›ç»“æœè¯æ˜äº† OneBit çš„å®ç”¨æ€§ã€‚</li>
</ul>
<p><img src="/medias/images/loading.gif" data-original="640-17103051386823.png" alt="å›¾ç‰‡"></p>
<p><img src="/medias/images/loading.gif" data-original="640-17103051458836.png" alt="å›¾ç‰‡"></p>
<h2 id="åˆ†æå’Œè®¨è®º">åˆ†æå’Œè®¨è®º</h2>
<h3 id="æ•ˆç‡">æ•ˆç‡</h3>
<p>æ˜¾ç„¶ï¼Œå°†æ¨¡å‹æƒé‡é‡åŒ–ä¸ºæä½ä½å¯ä»¥å¤§å¹…åº¦å‡å°‘å…¶å†…å­˜å ç”¨ã€‚å®é™…ä¸Šï¼Œå¦‚è¡¨3æ‰€ç¤ºï¼Œéšç€æ¨¡å‹è§„æ¨¡çš„å¢å¤§ï¼Œå‹ç¼©æ¯”ä¹Ÿåœ¨ä¸æ–­æé«˜ã€‚è¿™ä¸€ç‚¹å¯¹äºå¤§å‹æ¨¡å‹æ¥è¯´å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºå®ƒä½¿å¾—å°†è¿™ç±»æ¨¡å‹éƒ¨ç½²åˆ°å•ä¸ªGPUä¸Šæˆä¸ºå¯èƒ½ï¼Œä»è€Œæå¤§åœ°æé«˜äº†æ¨¡å‹çš„å®é™…åº”ç”¨æ€§å’Œçµæ´»æ€§ã€‚</p>
<p><img src="/medias/images/loading.gif" data-original="640-17103051778509.png" alt="å›¾ç‰‡"></p>
<p>è™½ç„¶è¯¥æ–¹æ³•åœ¨å®æ–½è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå¯¼è‡´ä¸€å®šçš„æ€§èƒ½æŸå¤±ï¼Œä½†å¦‚å›¾4æ‰€ç¤ºï¼Œå®ƒåœ¨ç©ºé—´å ç”¨å’Œæ¨¡å‹æ€§èƒ½ä¹‹é—´è¾¾åˆ°äº†è‰¯å¥½çš„å¹³è¡¡ã€‚</p>
<p><img src="/medias/images/loading.gif" data-original="640-171030518808212.png" alt="å›¾ç‰‡"></p>
<p>æ¯”å¦‚åªéœ€ä½¿ç”¨åŸå§‹æ¨¡å‹ç©ºé—´çš„0.2å€ï¼Œå³å¯å®ç°ä¸FP16ç›¸å½“çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<p>æ­¤å¤–ï¼Œé€šè¿‡å°†æƒé‡é‡åŒ–ä¸ºÂ±1ï¼Œèƒ½å¤Ÿè¿›ä¸€æ­¥åŠ é€ŸCPUä¸Šçš„çŸ©é˜µä¹˜æ³•æ“ä½œã€‚</p>
<p>è¿™æ˜¯å› ä¸ºåœ¨è¿™ç§é‡åŒ–æ–¹å¼ä¸‹ï¼ŒåŸæœ¬éœ€è¦è¿›è¡Œçš„æµ®ç‚¹ä¹˜æ³•å¯ä»¥è½¬æ¢ä¸ºé€Ÿåº¦æ›´å¿«çš„ä½æ“ä½œï¼Œæ˜¾è‘—æå‡è®¡ç®—æ•ˆç‡ã€‚<strong>å› æ­¤ï¼Œè¯¥æ–¹æ³•çš„å†…å­˜å ç”¨æ˜¾è‘—å‡å°‘ï¼Œæ›´ç¬¦åˆä¸ªäººç”µè„‘å’Œæ™ºèƒ½æ‰‹æœºç­‰è®¾å¤‡çš„éƒ¨ç½²éœ€æ±‚ã€‚</strong></p>
<h3 id="é²æ£’æ€§">é²æ£’æ€§</h3>
<p><strong>æä½æ¯”ç‰¹é‡åŒ–ä½¿è®­ç»ƒè¿‡ç¨‹å¯¹å­¦ä¹ ç‡é«˜åº¦æ•æ„Ÿ</strong>ï¼Œå½“å­¦ä¹ ç‡è¿‡å°æˆ–è¿‡å¤§æ—¶ï¼Œä½¿æ¨¡å‹éš¾ä»¥æ”¶æ•›ã€‚è¿™ä¸»è¦æ˜¯ç”±äºæƒé‡å…ƒç´ åœ¨+1å’Œ-1ä¹‹é—´æ³¢åŠ¨æ—¶äº§ç”Ÿçš„æ¢¯åº¦å¹…åº¦è¾ƒå¤§ï¼Œå¯¼è‡´Linearå±‚è¾“å‡ºæ˜¾è‘—æ³¢åŠ¨ã€‚</p>
<p>ä¸‹å›¾æ˜¾ç¤ºäº†å¦ä¸€ç§1ä½é‡åŒ–æ¶æ„BitNetåœ¨ä½¿ç”¨ä¸åŒå­¦ä¹ ç‡è®­ç»ƒæ—¶çš„è¡¨ç°ï¼Œå¯ä»¥çœ‹åˆ°éå¸¸ä¸ç¨³å®šï¼š</p>
<p><img src="/medias/images/loading.gif" data-original="640-171030528286115.png" alt="å›¾ç‰‡"></p>
<p>è€ŒOneBité€šè¿‡å¼•å…¥ä¸¤ä¸ªFP16æ ¼å¼çš„å€¼å‘é‡æ¥è¡¥å……å¿…è¦çš„æµ®ç‚¹æ•°å€¼ç²¾åº¦ï¼ŒåŒæ—¶é™åˆ¶äº†é‡åŒ–åçŸ©é˜µä¹˜æ³•ç»“æœçš„æ³¢åŠ¨èŒƒå›´ï¼Œä»è€Œæé«˜äº†æ¨¡å‹çš„é²æ£’æ€§ï¼Œå±•ç°å‡ºæ›´ç¨³å®šçš„è®­ç»ƒè¿‡ç¨‹ï¼Œå¹¶ä¸”å¯¹å­¦ä¹ ç‡ä¸æ•æ„Ÿã€‚</p>
<h3 id="ä¸åŒç»„ä»¶çš„å½±å“">ä¸åŒç»„ä»¶çš„å½±å“</h3>
<p>OneBitä¸»è¦çš„å¯å˜ç»„ä»¶åŒ…æ‹¬Post-LayerNormã€å‚æ•°åˆå§‹åŒ–ç­‰ã€‚</p>
<ul>
<li>Post-LayerNormï¼šåœ¨é‡åŒ–æ„ŸçŸ¥è®­ç»ƒæœŸé—´ï¼Œæ¨¡å‹å­˜åœ¨æµ®ç‚¹æ•°æº¢å‡ºçš„é—®é¢˜ï¼Œå°¤å…¶åœ¨æ¨¡å‹æ·±åº¦å¢åŠ æ—¶ï¼Œæ¿€æ´»å€¼å®¹æ˜“æ€¥å‰§å¢é•¿ã€‚ä¸ºåº”å¯¹æ­¤é—®é¢˜ï¼Œæœ¬æ–‡é€‰æ‹©äº†Post-LayerNormç­–ç•¥ï¼Œè€ŒéPre-LayerNormã€‚å› ä¸ºåœ¨å®é™…åº”ç”¨ä¸­ï¼ŒPre-LayerNormæœ‰æ—¶å¯èƒ½æ— æ³•æœ‰æ•ˆåœ°æ§åˆ¶æ¿€æ´»å€¼çš„å¢é•¿ã€‚</li>
<li>å‚æ•°åˆå§‹åŒ–ï¼šåœ¨ä½¿ç”¨SVIDåšå‚æ•°åˆå§‹åŒ–æ—¶ï¼Œéè´ŸçŸ©é˜µåˆ†è§£å’Œå¥‡å¼‚å€¼åˆ†è§£å‡å¯ç”¨äºåˆ†è§£|W|ï¼Œä½†æ¨èä½¿ç”¨å¥‡å¼‚å€¼åˆ†è§£ã€‚å®ƒèƒ½åŠ å¿«è®­ç»ƒæ”¶æ•›é€Ÿåº¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒNMFåˆå§‹åŒ–æœ‰åŠ©äºè·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</li>
</ul>
<p><img src="/medias/images/loading.gif" data-original="640-171030531938518.png" alt="å›¾ç‰‡"></p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>OneBitæ¡†æ¶æå‡ºäº†ä¸€ç§å¤§èƒ†çš„1ä½é‡åŒ–æ–¹æ³•ï¼Œæå¤§åœ°å‡å°‘äº†æ¨¡å‹éƒ¨ç½²æ—¶çš„å­˜å‚¨å’Œè®¡ç®—å¼€é”€ã€‚å°½ç®¡å­˜åœ¨ä¸€äº›æ€§èƒ½æŸå¤±ï¼Œä½†å…¶åœ¨æ¨¡å‹å‹ç¼©å’Œéƒ¨ç½²æ•ˆç‡æ–¹é¢çš„æ½œåŠ›æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œä¸ºç ”ç©¶æä½ä½é‡åŒ–æ¨¡å‹æä¾›äº†ä¸€æ¡æ–°çš„æ¢ç´¢é€”å¾„ã€‚</p>
<h2 id="é™åˆ¶">é™åˆ¶</h2>
<p>å°½ç®¡ä½œè€…æå‡ºçš„æ–¹æ³•å¤§å¤§å‡å°‘äº† LLM çš„å†…å­˜å ç”¨ï¼Œä¸ºé«˜æ•ˆéƒ¨ç½² LLM å¸¦æ¥äº†å¸Œæœ›ï¼Œä½†ä»ç„¶å­˜åœ¨ä¸€äº›å±€é™æ€§ã€‚</p>
<ol>
<li>é¦–å…ˆï¼Œä¸åŸå§‹æ¨¡å‹ç›¸æ¯”ï¼Œä½œè€…çš„<strong>è¶…ä½ä½é‡åŒ–ä¸å¯é¿å…åœ°ä¼šé€ æˆæ€§èƒ½æŸå¤±</strong>ã€‚</li>
<li>æ­¤å¤–ï¼Œä½œè€…è¿˜ä¸äº†è§£ 1 ä½é‡åŒ–æ¨¡å‹æœ€ä½³å‚æ•°èƒŒåçš„æ•°å­¦åŸç†ï¼Œå› æ­¤<strong>åªèƒ½é€šè¿‡ä»£ä»·é«˜æ˜‚çš„ KD è¿‡ç¨‹æ¥å®ç°èƒ½åŠ›è½¬ç§»</strong>ã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™ç§ä»£ä»·æ˜¯ä¸€æ¬¡æ€§çš„ã€‚</li>
<li>æ­¤å¤–ï¼Œç”±äº 1 ä½é‡åŒ–çš„ç‰¹æ®Šæ€§ï¼Œä½œè€…çš„æ–¹æ³•<strong>æ— æ³•è‡ªç„¶æ‰©å±•åˆ°æ›´é«˜çš„ä½å®½</strong>ã€‚</li>
<li>æœ€åï¼Œä½œè€…<strong>æ²¡æœ‰è€ƒè™‘æ¿€æ´»é‡åŒ–çš„é—®é¢˜</strong>ï¼Œå°†å…¶ä½œä¸ºæœªæ¥çš„å·¥ä½œã€‚</li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">QT-7274</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://qt-7274.github.io/2024/03/12/mai-xiang-ji-di-wei-da-yu-yan-mo-xing-1bit-liang-hua/">https://qt-7274.github.io/2024/03/12/mai-xiang-ji-di-wei-da-yu-yan-mo-xing-1bit-liang-hua/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="/about" target="_blank">QT-7274</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">
                                    <span class="chip bg-color">æ·±åº¦å­¦ä¹ </span>
                                </a>
                            
                                <a href="/tags/%E8%AE%BA%E6%96%87%E5%B7%A5%E4%BD%9C/">
                                    <span class="chip bg-color">è®ºæ–‡å·¥ä½œ</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯åˆ†äº«ï¼</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">èµ</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">ä½ çš„èµè¯†æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">æ”¯ä»˜å®</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">å¾® ä¿¡</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/images/loading.gif" data-original="/medias/reward/alipay.jpg" class="reward-img" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
                    </div>
                    <div id="wechat">
                        <img src="/medias/images/loading.gif" data-original="/medias/reward/wechat.png" class="reward-img" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.gif") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>è¯„è®º</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid;">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'tzmyy70PpnbbxclXN4jYmjPA-gzGzoHsz',
        appKey: 'TCY55mH7vS6x5sVr1bCLm5Gg',
        serverURLs: '',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        requiredFields: ['nick','mail'],
        enableQQ: 'true',
        lang: 'zh-cn',
        placeholder: 'ğŸ˜‰ç•…æ‰€æ¬²è¨€ï¼\nğŸ“²è¯·æ–‡æ˜è¯„è®ºï¼Œç¦æ­¢æ¶æ„è¯„è®ºğŸš« \nâš ï¸å…¬å¼€ç½‘ç»œç©ºé—´ï¼Œè¯·ä¸è¦å‘è¡¨ä»»ä½•åŒ…å«ä¸ªäººæˆ–å…¶ä»–äººçš„éšç§ä¿¡æ¯ğŸ”',
        master: ["f18e9f29c8274571d5a0752aca9310ef"],
        friends:["0aa4f09d8249581a4380a6fc541062e7","6a66a1ba019c52f168d99313efbef39a"]
    });
</script>

<!--é…·Qæ¨é€-->


    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;æœ¬ç¯‡
            </div>
            <div class="card">
                <a href="/2024/03/12/mai-xiang-ji-di-wei-da-yu-yan-mo-xing-1bit-liang-hua/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/images/loading.gif" data-original="/medias/featureimages/0.jpg" class="responsive-img" alt="è¿ˆå‘æä½ä½å¤§è¯­è¨€æ¨¡å‹â€”â€”1bité‡åŒ–">
                        
                        <span class="card-title">è¿ˆå‘æä½ä½å¤§è¯­è¨€æ¨¡å‹â€”â€”1bité‡åŒ–</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            ç›´æ¥è¶Šè¿‡2bitè¿™ä¸€é‡åŒ–çº§åˆ«ï¼Œå¯¹LLMå¤§è¯­è¨€æ¨¡å‹è¿›è¡Œ1bité‡åŒ–å°è¯•ï¼
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2024-03-12
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="post-category">
                                    æ·±åº¦å­¦ä¹ 
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">
                        <span class="chip bg-color">æ·±åº¦å­¦ä¹ </span>
                    </a>
                    
                    <a href="/tags/%E8%AE%BA%E6%96%87%E5%B7%A5%E4%BD%9C/">
                        <span class="chip bg-color">è®ºæ–‡å·¥ä½œ</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                ä¸‹ä¸€ç¯‡&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2024/03/11/qt-de-zhuo-you-jian-shang-ji/">
                    <div class="card-image">
                        
                        <img src="/medias/images/loading.gif" data-original="https://roseblog.oss-cn-beijing.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E7%89%87/pic4023671.webp" class="responsive-img" alt="QTçš„æ¡Œæ¸¸é‰´èµé›†">
                        
                        <span class="card-title">QTçš„æ¡Œæ¸¸é‰´èµé›†</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            æ¡Œé¢æ¸¸æˆçš„è§¦æ„Ÿå’Œæœºåˆ¶æ˜¯å¾ˆå¤šç”µå­æ¸¸æˆæœ›å°˜è«åŠçš„ã€‚
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2024-03-11
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%A1%8C%E9%9D%A2%E6%B8%B8%E6%88%8F/" class="post-category">
                                    æ¡Œé¢æ¸¸æˆ
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%B8%B8%E6%88%8F/">
                        <span class="chip bg-color">æ¸¸æˆ</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- æ˜¯å¦åŠ è½½ä½¿ç”¨è‡ªå¸¦çš„ prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- ä»£ç è¯­è¨€ -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ä»£ç å—å¤åˆ¶ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ä»£ç å—æ”¶ç¼© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4, h5'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2024</span>
            
            <a href="/about" target="_blank">QT-7274</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;æ€»è®¿é—®é‡:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;æ€»è®¿é—®äººæ•°:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- è¿è¡Œå¤©æ•°æé†’. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/QT-7274" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:2531376773@qq.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2531376773" class="tooltipped" target="_blank" data-tooltip="QQè”ç³»æˆ‘: 2531376773" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>


    <a  class="tooltipped" target="_blank" data-tooltip="å¾®ä¿¡è”ç³»æˆ‘: Q5268368" data-position="top" data-delay="50">
        <i class="fab fa-weixin"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- é›ªèŠ±ç‰¹æ•ˆ -->
    

    <!-- é¼ æ ‡æ˜Ÿæ˜Ÿç‰¹æ•ˆ -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--è…¾è®¯å…”å°å·¢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 3,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>

</html>
